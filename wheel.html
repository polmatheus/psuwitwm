<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>PSUWIT Admin - 20 Random Events</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>
</head>
<body class="bg-slate-900 text-white p-6 flex flex-col items-center min-h-screen">
    <h1 class="text-3xl font-black text-yellow-500 mb-8 uppercase">Market Event Controller</h1>
    
    <div class="bg-slate-800 p-8 rounded-3xl border-4 border-dashed border-slate-700 text-center mb-8 w-full max-w-md">
        <div id="year-display" class="text-xl text-slate-400 uppercase font-bold">‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</div>
        <div id="event-name" class="text-2xl font-black mt-2 text-white">YEAR 0</div>
        <div id="event-desc" class="text-sm text-yellow-500 mt-2 italic font-mono uppercase">Waiting for Random...</div>
    </div>

    <div class="flex flex-col gap-4 w-full max-w-md">
        <button onclick="randomEvent()" class="bg-blue-600 hover:bg-blue-500 p-8 rounded-2xl font-black text-2xl shadow-xl active:scale-95 transition uppercase">Random Event üé≤</button>
        <button onclick="resetGame()" class="bg-white text-black p-4 rounded-xl font-black uppercase hover:bg-gray-200 mt-4">Reset Game to Year 0</button>
    </div>

    <script>
        const firebaseConfig = { 
            apiKey: "AIzaSyDkewWSMrL538xerq70Ae90Svv8_p75Uks",
            authDomain: "psuwitwm.firebaseapp.com",
            databaseURL: "https://psuwitwm-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "psuwitwm",
            appId: "1:268031926990:web:c58f8695deebf4a5f6e69f" 
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let currentYear = 0;

        const eventPool = [
            { n: "Bull Run", m: {psuwit: 1.5, btc: 2.5, gold: 0.9, save: 1} },
            { n: "Crypto Winter", m: {psuwit: 1.1, btc: 0.2, gold: 1.2, save: 1} },
            { n: "War Outbreak", m: {psuwit: 0.6, btc: 0.5, gold: 2.8, save: 1} },
            { n: "AI Revolution", m: {psuwit: 2.2, btc: 1.5, gold: 0.8, save: 1} },
            { n: "Hyper Inflation", m: {psuwit: 1.8, btc: 1.8, gold: 1.8, save: 1} },
            { n: "Global Recession", m: {psuwit: 0.4, btc: 0.4, gold: 1.1, save: 1} },
            { n: "Gold Discovery", m: {psuwit: 1.0, btc: 1.0, gold: 0.4, save: 1} },
            { n: "BTC Halving", m: {psuwit: 1.2, btc: 3.2, gold: 1.0, save: 1} },
            { n: "PSUWIT IPO Success", m: {psuwit: 4.0, btc: 1.0, gold: 1.0, save: 1} },
            { n: "Tech Meltdown", m: {psuwit: 0.3, btc: 0.7, gold: 1.5, save: 1} },
            { n: "Stability Act", m: {psuwit: 1.05, btc: 1.05, gold: 1.05, save: 1} },
            { n: "Pandemic Strike", m: {psuwit: 0.7, btc: 1.4, gold: 1.8, save: 1} },
            { n: "Space Exploration", m: {psuwit: 2.5, btc: 1.2, gold: 0.7, save: 1} },
            { n: "Central Bank Ban", m: {psuwit: 0.9, btc: 0.1, gold: 1.2, save: 1} },
            { n: "Oil Crisis", m: {psuwit: 0.6, btc: 0.8, gold: 2.0, save: 1} },
            { n: "Tax Haven Leak", m: {psuwit: 0.8, btc: 1.5, gold: 1.3, save: 1} },
            { n: "Peace Treaty", m: {psuwit: 1.4, btc: 1.1, gold: 0.6, save: 1} },
            { n: "Cyber Attack", m: {psuwit: 0.5, btc: 0.4, gold: 1.2, save: 1} },
            { n: "New Energy Source", m: {psuwit: 2.8, btc: 1.0, gold: 0.5, save: 1} },
            { n: "Moon Mission", m: {psuwit: 5.0, btc: 5.0, gold: 0.1, save: 1} }
        ];

        function randomEvent() {
            currentYear++;
            const randomIdx = Math.floor(Math.random() * eventPool.length);
            const selected = eventPool[randomIdx];

            db.ref('market_state').set({
                year: currentYear,
                event: selected.n,
                multi: selected.m,
                ts: Date.now()
            });

            document.getElementById('year-display').innerText = `YEAR ${currentYear}`;
            document.getElementById('event-name').innerText = selected.n;
            document.getElementById('event-desc').innerText = `Multipliers Sent!`;
        }

        function resetGame() {
            if(confirm("Reset all players?")) {
                currentYear = 0;
                db.ref('market_state').set({ year: 0, multi: { psuwit: 1, btc: 1, gold: 1, save: 1 }, event: "New Game" });
                location.reload();
            }
        }
    </script>
</body>
</html>
