<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PSUWIT Market Wheel (Admin)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>
    <style>
        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏ß‡∏á‡∏•‡πâ‡∏≠ */
        #wheel-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 0 auto;
        }
        #wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 8px solid #334155;
            transition: transform 4s cubic-bezier(0.15, 0, 0.15, 1);
            background: conic-gradient(
                #ef4444 0deg 60deg,    /* Crash */
                #22c55e 60deg 120deg,  /* Bull */
                #eab308 120deg 180deg, /* Gold Rush */
                #3b82f6 180deg 240deg, /* PSUWIT Moon */
                #a855f7 240deg 300deg, /* Crypto Winter */
                #64748b 300deg 360deg  /* Normal */
            );
        }
        #pointer {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 0; 
            height: 0; 
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 30px solid #ffffff;
            z-index: 10;
        }
    </style>
</head>
<body class="bg-slate-900 text-white flex flex-col items-center justify-center min-h-screen p-4">

    <div class="text-center mb-8">
        <h1 class="text-3xl font-black text-yellow-500 uppercase">Market Controller</h1>
        <p class="text-slate-400">‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏ï‡∏•‡∏≤‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô 40 ‡∏Ñ‡∏ô</p>
    </div>

    <div id="wheel-container">
        <div id="pointer"></div>
        <div id="wheel"></div>
    </div>

    <div id="status-box" class="mt-8 p-4 bg-slate-800 rounded-xl border border-slate-700 w-full max-w-xs text-center">
        <p class="text-sm text-slate-400">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:</p>
        <p id="current-event" class="text-xl font-bold text-white">‡∏£‡∏≠‡∏Å‡∏î‡∏´‡∏°‡∏∏‡∏ô‡∏ß‡∏á‡∏•‡πâ‡∏≠...</p>
    </div>

    <button id="spin-btn" onclick="spin()" class="mt-6 bg-yellow-500 hover:bg-yellow-400 text-slate-900 font-bold py-4 px-10 rounded-full text-xl shadow-lg transform active:scale-95 transition">
        ‡∏´‡∏°‡∏∏‡∏ô‡∏ß‡∏á‡∏•‡πâ‡∏≠‡∏™‡∏∏‡πà‡∏°‡∏£‡∏≤‡∏Ñ‡∏≤!
    </button>

    <script>
        // --- Firebase Config (‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô) ---
        const firebaseConfig = { 
            apiKey: "AIzaSyDkewWSMrL538xerq70Ae90Svv8_p75Uks",
            authDomain: "psuwitwm.firebaseapp.com",
            databaseURL: "https://psuwitwm-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "psuwitwm",
            storageBucket: "psuwitwm.firebasestorage.app",
            messagingSenderId: "268031926990",
            appId: "1:268031926990:web:c58f8695deebf4a5f6e69f",
            measurementId: "G-3RNVWEJ4D4" 
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let currentRotation = 0;

        // ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì (Multipliers)
        const events = [
            { name: "üî¥ ‡∏ï‡∏•‡∏≤‡∏î‡∏•‡πà‡∏°‡∏™‡∏•‡∏≤‡∏¢ (CRASH)", color: "#ef4444", multi: { psuwit: 0.5, btc: 0.4, gold: 0.8, save: 1 } },
            { name: "üü¢ ‡∏ï‡∏•‡∏≤‡∏î‡∏Å‡∏£‡∏∞‡∏ó‡∏¥‡∏á (BULL)", color: "#22c55e", multi: { psuwit: 1.4, btc: 1.6, gold: 1.1, save: 1 } },
            { name: "üü° ‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡∏û‡∏∏‡πà‡∏á‡πÅ‡∏£‡∏á (GOLD RUSH)", color: "#eab308", multi: { psuwit: 0.9, btc: 0.8, gold: 2.5, save: 1 } },
            { name: "üîµ ‡∏´‡∏∏‡πâ‡∏ô PSUWIT ‡∏û‡∏∏‡πà‡∏á (TO THE MOON)", color: "#3b82f6", multi: { psuwit: 3.0, btc: 1.0, gold: 1.0, save: 1 } },
            { name: "üü£ ‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡∏Ñ‡∏£‡∏¥‡∏õ‡πÇ‡∏ï (CRYPTO WINTER)", color: "#a855f7", multi: { psuwit: 1.1, btc: 0.2, gold: 1.2, save: 1 } },
            { name: "‚ö™ ‡∏™‡∏†‡∏≤‡∏ß‡∏∞‡∏õ‡∏Å‡∏ï‡∏¥ (STABLE)", color: "#64748b", multi: { psuwit: 1.0, btc: 1.0, gold: 1.0, save: 1 } }
        ];

        function spin() {
            const btn = document.getElementById('spin-btn');
            btn.disabled = true;
            btn.classList.add('opacity-50', 'cursor-not-allowed');

            // ‡∏™‡∏∏‡πà‡∏°‡∏≠‡∏á‡∏®‡∏≤‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô (‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 5 ‡∏£‡∏≠‡∏ö)
            const randomDegree = Math.floor(Math.random() * 360);
            const totalRotation = currentRotation + 1800 + randomDegree; 
            currentRotation = totalRotation;

            const wheel = document.getElementById('wheel');
            wheel.style.transform = `rotate(${totalRotation}deg)`;

            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ß‡πà‡∏≤‡∏ï‡∏Å‡∏ä‡πà‡∏≠‡∏á‡πÑ‡∏´‡∏ô (‡∏°‡∏µ 6 ‡∏ä‡πà‡∏≠‡∏á ‡∏ä‡πà‡∏≠‡∏á‡∏•‡∏∞ 60 ‡∏≠‡∏á‡∏®‡∏≤)
            // ‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏≠‡∏á‡∏®‡∏≤‡∏ó‡∏µ‡πà‡∏´‡∏¢‡∏∏‡∏î
            const actualDegree = (360 - (totalRotation % 360)) % 360;
            const eventIndex = Math.floor(actualDegree / 60);
            const result = events[eventIndex];

            setTimeout(() => {
                // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï UI ‡∏´‡∏ô‡πâ‡∏≤‡∏ß‡∏á‡∏•‡πâ‡∏≠
                const statusText = document.getElementById('current-event');
                statusText.innerText = result.name;
                statusText.style.color = result.color;

                // **‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤‡πÑ‡∏õ Firebase**
                db.ref('market').set(result.multi);

                btn.disabled = false;
                btn.classList.remove('opacity-50', 'cursor-not-allowed');
            }, 4000); // ‡∏£‡∏≠‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏ß‡∏á‡∏•‡πâ‡∏≠‡∏à‡∏∞‡∏´‡∏¢‡∏∏‡∏î (4 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
        }
    </script>
</body>
</html>
