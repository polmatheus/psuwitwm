<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>PSUWIT Admin - Market Control</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>
</head>
<body class="bg-slate-900 text-white p-6 flex flex-col items-center min-h-screen">
    <h1 class="text-3xl font-black text-yellow-500 mb-8">ADMIN CONTROL PANEL</h1>
    
    <div class="bg-slate-800 p-8 rounded-3xl border-4 border-dashed border-slate-700 text-center mb-8 w-full max-w-md">
        <div id="year-display" class="text-xl text-slate-400 uppercase font-bold">‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</div>
        <div id="event-display" class="text-3xl font-black mt-2">YEAR 0</div>
    </div>

    <div class="grid grid-cols-2 gap-4 w-full max-w-md mb-6">
        <button onclick="spin('BULL')" class="bg-green-600 hover:bg-green-500 p-6 rounded-2xl font-bold">BULL MARKET üöÄ</button>
        <button onclick="spin('CRASH')" class="bg-red-600 hover:bg-red-500 p-6 rounded-2xl font-bold">MARKET CRASH üìâ</button>
        <button onclick="spin('WAR')" class="bg-yellow-600 hover:bg-yellow-500 p-6 rounded-2xl font-bold">GOLD RUSH ‚öîÔ∏è</button>
        <button onclick="spin('NORMAL')" class="bg-blue-600 hover:bg-blue-500 p-6 rounded-2xl font-bold">NORMAL ‚öñÔ∏è</button>
    </div>

    <button onclick="resetGame()" class="w-full max-w-md bg-white text-black p-4 rounded-xl font-black uppercase hover:bg-gray-200">Reset All Players to Year 0</button>

    <script>
        const firebaseConfig = { 
            apiKey: "AIzaSyDkewWSMrL538xerq70Ae90Svv8_p75Uks",
            authDomain: "psuwitwm.firebaseapp.com",
            databaseURL: "https://psuwitwm-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "psuwitwm",
            appId: "1:268031926990:web:c58f8695deebf4a5f6e69f" 
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let currentYear = 0;

        function spin(type) {
            currentYear++;
            let multi = { psuwit: 1, btc: 1, gold: 1, save: 1 };
            if(type === 'BULL') multi = { psuwit: 1.5, btc: 2.2, gold: 0.9, save: 1 };
            else if(type === 'CRASH') multi = { psuwit: 0.4, btc: 0.2, gold: 0.8, save: 1 };
            else if(type === 'WAR') multi = { psuwit: 0.8, btc: 0.6, gold: 2.5, save: 1 };
            else multi = { psuwit: 1.1, btc: 1.1, gold: 1.05, save: 1 };

            db.ref('market_state').set({
                year: currentYear,
                event: type,
                multi: multi,
                timestamp: Date.now()
            });
            updateUI(currentYear, type);
        }

        function resetGame() {
            if(confirm("‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô?")) {
                currentYear = 0;
                db.ref('market_state').set({ year: 0, multi: { psuwit: 1, btc: 1, gold: 1, save: 1 } });
                updateUI(0, "RESET");
            }
        }

        function updateUI(y, e) {
            document.getElementById('year-display').innerText = "‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô";
            document.getElementById('event-display').innerText = `YEAR ${y} (${e})`;
        }
    </script>
</body>
</html>
